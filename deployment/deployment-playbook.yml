---
- name: Pull docker image of Calculator
  hosts: all
  become: yes
  become_method: sudo
  become_user: akila  
  
    
  tasks:   
    - name: Add Docker GPG apt Key
      apt_key:
        url: 'https://download.docker.com/linux/ubuntu/gpg'
        state: present
    
    - name: Add Docker Repository
      apt_repository:
        repo: "deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ubuntu_version.stdout }} stable"
        state: present

    - name: Update apt packages
      apt:
        update_cache: "yes"
        force_apt_get: "yes"
      
    - name: Install docker
      apt:
        name: 'docker-ce'
        state: present
        force_apt_get: yes
        
        
    - name: Start docker service
      service:
        name: 'docker'
        state: started
        enabled: yes
        
    - name: Pull image
      docker_image:
        name: akila1811/spe-mini-project
        source: pull
    
